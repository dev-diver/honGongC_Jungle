# CH11 문자

- **문자 상수는 4바이트 크기를 가짐**
    - int에 저장하고 정수처럼 연산 가능
    - %d, %c 둘 다 출력 가능
- char형 변수에 저장하면 오른쪽 1바이트만 저장하고 남는 바이트는 버림.
    - 어차피 왼쪽 3바이트는 전부 0이라 상관 없음
- 대문자를 소문자로 바꾸기
    - 소문자가 대문자보다 아스키 값이 크다.
    - ‘a’ : 97
    - ‘A’: 65
    - ‘0’ : 48
    
    ```c
    char small, cap = 'A';
    small = cap + ('a'-'A');
    ```
    
- Scanf()
    - 화이트 스페이스(스페이스, 탭, 엔터) 도 문자로 입력됨
    - %c를 제외한 %d,%lf,%s는 화이트 스페이스가 데이터 구분용으로 쓰임
    - %c는 화이트스페이스도 데이터로 취급하므로 , 화이트 스페이스 제외한 문자를 입력하고 싶으면 %c 앞에 화이트 스페이스 중 하나 추가해야 함
        
        `scanf(" %c  %c")`
        
    - **scanf 입력값에 int형 변수를 쓰면 앞쪽 3바이트 쓰레기 값이 먼저 입력되어 %c로 바로 사용 안됨!  (다시보기)**
        - **문자 입력하는 경우에는 char형 변수를 쓰자**
- getchar, putchar
    - 쓰는 이유 - printf, scanf는 숫자도 입력하는 기능이 포함되어, 문자만 입력하는 함수에 비해 크기가 크다.
    - getchar는 int로 반환값을 저장하는 것이 좋다.
        - 키보드는 ASCII만 입력 가능하지만, File은 255 반환할 수도 있다. (어떤 경우에 들어올까?)
        - 이 때 char형은 1바이트라 255와 에러값인 -1이 같은 `11111111` 이므로 먼저 int로 저장하고 char형 변수에 옮겨 사용하는 것이 좋다.
    - 화이트스페이스를 제외하는 옵션은 따로 없다.

## 버퍼

- 운영체제가 자동으로 할당하는 메모리의 저장 공간
- 키보드로 입력하는 데이터는 일단 버퍼에 저장된 후에 scanf 함수에 의해 변수에 입력된다.
    - 입력데이터는 `enter` 를 누르는 순간 버퍼에 저장되며 개행 문자도 함께 저장됨.
- 최초 scanf 함수가 호출될 때 키보드로 문자열을 입력하면 일단 버퍼에 저장한 후에, 차례로 한번에 가져옴.
- 남은 버퍼는 메모리에 남겨져 있고, 불필요하면 지울 수도 있음
- 실험(모자라게 입력하기)
    
    
- 실험(두 글자씩 받아보기)
    
    ```c
    #include <stdio.h>
    
    int main(void)
    {
      char ch[200];
      int i;
      for(i=0;i<3;i++)
      {
        scanf("%c%c",ch+i*2,ch+i*2+1);
        printf("%c%c\n", ch[i*2],ch[i*2+1]);
      }
    
      return 0;
    }
    ```
    

### 버퍼를 사용하면 좋은 점

- 데이터를 안정적으로 입력받을 수 있음 - 프로그램이 다른 일을 하느라 해당 입력을 즉시 받지 못해도 데이터가 사라지지 않아 안정적
- 입력장치와 독립적으로 사용 가능 - scanf가 키보드와 직접 연결되지 않아, 입력장치가 바귀더라도 함수를 수정하지 않고 사용 가능.

### 입력 종료 신호 (운영체제에 따라 다름) → scanf에서 -1을 반환

- `ctrl + z`
- `ctrl + z` + `enterctrl+ z`
- `ctrl+ D`
- EOF 는  -1 과 같다.

### 버퍼 지우기

- 남은 버퍼를 모두 써버리는 방식으로 지운다.
- 예제
    
    ```c
    #include <stdio.h>
    
    int main(void)
    {
      int num;
      char grade;
      printf("학번 입력: ");
      scanf("%d", &num);
      getchar();    //%d 다음 %c를 받을 경우 앞에 Enter로 입력한 개행문자가 들어감. 이를 비워줘야 함
      printf("학점 입력: ");
      grade = getchar();
      // scanf("%c", &grade);  //scanf도 마찬가지임
      printf("학번: %d, 학점: %c", num, grade);
    
      return 0;
    }
    ```
    

`while(getchar()!='\n')`

### 기타

- fflush(stdout) → **출력 버퍼**에 남아 있는 데이터 모두 지움

## 문제